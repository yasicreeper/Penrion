<Window x:Class="OsuTabletDriver.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="iPad Settings Control"
        Height="700"
        Width="900"
        Background="{StaticResource BackgroundColor}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="iPad Tablet Settings"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="{StaticResource TextColor}"/>
            <TextBlock Text="Control all iPad settings from Windows"
                       FontSize="14"
                       Foreground="{StaticResource TextSecondaryColor}"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Settings Tabs -->
        <TabControl Grid.Row="1" Background="{StaticResource SurfaceColor}">
            
            <!-- PERFORMANCE TAB -->
            <TabItem Header="âš¡ Performance">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Touch Rate -->
                        <GroupBox Header="Touch Input" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <TextBlock Text="Touch Rate (Hz)" Foreground="{StaticResource TextColor}"/>
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="TouchRateSlider"
                                            Grid.Column="0"
                                            Minimum="60"
                                            Maximum="200"
                                            TickFrequency="20"
                                            IsSnapToTickEnabled="True"
                                            ValueChanged="OnSettingChanged"/>
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding ElementName=TouchRateSlider, Path=Value, StringFormat={}{0:F0} Hz}"
                                               Foreground="{StaticResource TextColor}"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Margin="15,0,0,0"
                                               VerticalAlignment="Center"/>
                                </Grid>
                                <TextBlock Text="Higher = more responsive (60-200 Hz realistic for iPad)"
                                           Foreground="{StaticResource TextSecondaryColor}"
                                           FontSize="11"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Performance Modes -->
                        <GroupBox Header="Performance Modes" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="PerformanceModeCheck"
                                          Content="Performance Mode (120 FPS)"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="VeryLowLatencyCheck"
                                          Content="Very Low Latency Mode (144 FPS)"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="BatterySaverCheck"
                                          Content="Battery Saver (Lower Performance)"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- STREAMING TAB -->
            <TabItem Header="ðŸŽ¬ Screen Streaming">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Stream Quality -->
                        <GroupBox Header="Stream Quality" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <ComboBox x:Name="StreamQualityCombo"
                                          SelectionChanged="OnSettingChanged"
                                          FontSize="14">
                                    <ComboBoxItem Content="Very Low (480p)" Tag="Very Low (144p)"/>
                                    <ComboBoxItem Content="Low (720p)" Tag="Low"/>
                                    <ComboBoxItem Content="Medium (900p)" Tag="Medium"/>
                                    <ComboBoxItem Content="High (1080p)" Tag="High"/>
                                    <ComboBoxItem Content="Ultra (1440p)" Tag="Ultra"/>
                                </ComboBox>
                                <TextBlock Text="Lower quality = lower latency + battery usage"
                                           Foreground="{StaticResource TextSecondaryColor}"
                                           FontSize="11"
                                           Margin="0,10,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Latency Options -->
                        <GroupBox Header="Latency Optimization" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="LowLatencyCheck"
                                          Content="Low Latency Mode"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TABLET AREA TAB -->
            <TabItem Header="ðŸ“ Active Area">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Active Area -->
                        <GroupBox Header="Tablet Active Area" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <TextBlock Text="Width" Foreground="{StaticResource TextColor}" Margin="0,0,0,5"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="ActiveAreaWidthSlider"
                                            Grid.Column="0"
                                            Minimum="0.1"
                                            Maximum="1.0"
                                            TickFrequency="0.1"
                                            ValueChanged="OnSettingChanged"/>
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding ElementName=ActiveAreaWidthSlider, Path=Value, StringFormat={}{0:P0}}"
                                               Foreground="{StaticResource TextColor}"
                                               FontSize="14"
                                               Margin="15,0,0,0"
                                               VerticalAlignment="Center"/>
                                </Grid>

                                <TextBlock Text="Height" Foreground="{StaticResource TextColor}" Margin="0,20,0,5"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="ActiveAreaHeightSlider"
                                            Grid.Column="0"
                                            Minimum="0.1"
                                            Maximum="1.0"
                                            TickFrequency="0.1"
                                            ValueChanged="OnSettingChanged"/>
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding ElementName=ActiveAreaHeightSlider, Path=Value, StringFormat={}{0:P0}}"
                                               Foreground="{StaticResource TextColor}"
                                               FontSize="14"
                                               Margin="15,0,0,0"
                                               VerticalAlignment="Center"/>
                                </Grid>

                                <CheckBox x:Name="ShowActiveAreaCheck"
                                          Content="Show Active Area Border on iPad"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,20,0,0"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- PRESSURE TAB -->
            <TabItem Header="âœï¸ Pressure">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Pressure Settings -->
                        <GroupBox Header="Pressure Sensitivity" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <TextBlock Text="Sensitivity" Foreground="{StaticResource TextColor}"/>
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="PressureSensitivitySlider"
                                            Grid.Column="0"
                                            Minimum="0.5"
                                            Maximum="2.0"
                                            TickFrequency="0.1"
                                            ValueChanged="OnSettingChanged"/>
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding ElementName=PressureSensitivitySlider, Path=Value, StringFormat={}{0:F1}}"
                                               Foreground="{StaticResource TextColor}"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Margin="15,0,0,0"
                                               VerticalAlignment="Center"/>
                                </Grid>

                                <TextBlock Text="Pressure Curve" Foreground="{StaticResource TextColor}" Margin="0,20,0,5"/>
                                <ComboBox x:Name="PressureCurveCombo"
                                          SelectionChanged="OnSettingChanged"
                                          FontSize="14">
                                    <ComboBoxItem Content="Linear" Tag="Linear"/>
                                    <ComboBoxItem Content="Exponential" Tag="Exponential"/>
                                    <ComboBoxItem Content="Logarithmic" Tag="Logarithmic"/>
                                    <ComboBoxItem Content="Custom" Tag="Custom"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- FEEDBACK TAB -->
            <TabItem Header="ðŸ“³ Feedback">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Feedback Options -->
                        <GroupBox Header="Touch Feedback" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="VisualFeedbackCheck"
                                          Content="Visual Feedback (Touch Circles)"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="HapticFeedbackCheck"
                                          Content="Haptic Feedback"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="SoundEffectsCheck"
                                          Content="Sound Effects"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- DISPLAY TAB -->
            <TabItem Header="ðŸ–¥ï¸ Display">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Display Options -->
                        <GroupBox Header="iPad Display Options" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="BlackScreenModeCheck"
                                          Content="Black Screen Mode"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="FullscreenModeCheck"
                                          Content="Fullscreen Mode"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="KeepScreenOnCheck"
                                          Content="Keep Screen On"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                                <CheckBox x:Name="AlwaysOnDisplayCheck"
                                          Content="Always-On Display"
                                          Foreground="{StaticResource TextColor}"
                                          Checked="OnSettingChanged"
                                          Unchecked="OnSettingChanged"
                                          Margin="0,5"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

        </TabControl>

        <!-- Footer with Status -->
        <Grid Grid.Row="2" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Saving Indicator (Animated) -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <ProgressBar x:Name="SavingProgressBar"
                             Width="150"
                             Height="20"
                             IsIndeterminate="True"
                             Visibility="Collapsed"
                             Foreground="{StaticResource PrimaryColor}"/>
                <TextBlock x:Name="SavingText"
                           Text="Sending to iPad..."
                           Foreground="{StaticResource TextColor}"
                           VerticalAlignment="Center"
                           Margin="10,0,0,0"
                           Visibility="Collapsed"/>
            </StackPanel>

            <!-- Success Message (Animated) -->
            <StackPanel x:Name="SuccessPanel"
                        Grid.Column="0"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                <Ellipse Width="20" Height="20" Fill="{StaticResource SuccessColor}"/>
                <TextBlock Text="âœ“ Settings applied successfully!"
                           Foreground="{StaticResource SuccessColor}"
                           VerticalAlignment="Center"
                           Margin="10,0,0,0"
                           FontWeight="Bold"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Content="Reset to Defaults"
                        Click="ResetToDefaults_Click"
                        Style="{StaticResource ModernButton}"
                        Background="#F44336"
                        Margin="0,0,10,0"/>
                <Button Content="Close"
                        Click="Close_Click"
                        Style="{StaticResource ModernButton}"/>
            </StackPanel>
        </Grid>

    </Grid>
</Window>
