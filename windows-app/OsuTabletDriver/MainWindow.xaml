<Window x:Class="OsuTabletDriver.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Penrion - OSU! Tablet Driver"
        Height="500"
        Width="700"
        Background="{StaticResource BackgroundColor}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Penrion OSU! Tablet Driver"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="{StaticResource TextColor}"/>
            <TextBlock Text="Transform your iPad into a professional OSU! tablet"
                       FontSize="14"
                       Foreground="{StaticResource TextSecondaryColor}"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Connection Status -->
            <Border Grid.Row="0"
                    Background="{StaticResource SurfaceColor}"
                    CornerRadius="10"
                    Padding="20"
                    Margin="0,0,0,20">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="15"
                                 Height="15"
                                 Margin="0,0,10,0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Setter Property="Fill" Value="{StaticResource ErrorColor}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                            <Setter Property="Fill" Value="{StaticResource SuccessColor}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <TextBlock Text="{Binding StatusText}"
                                   FontSize="16"
                                   Foreground="{StaticResource TextColor}"/>
                    </StackPanel>

                    <!-- OSU! Detection -->
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <TextBlock Text="OSU! Status: "
                                   Foreground="{StaticResource TextSecondaryColor}"/>
                        <TextBlock Foreground="{StaticResource TextColor}">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="Not Running"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsOsuDetected}" Value="True">
                                            <Setter Property="Text" Value="âœ“ Detected"/>
                                            <Setter Property="Foreground" Value="{StaticResource SuccessColor}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Stats Grid -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Latency Card -->
                <Border Grid.Column="0"
                        Background="{StaticResource SurfaceColor}"
                        CornerRadius="10"
                        Padding="20"
                        Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ“¡ Latency"
                                   FontSize="16"
                                   Foreground="{StaticResource TextSecondaryColor}"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding LatencyText}"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource PrimaryColor}"/>
                    </StackPanel>
                </Border>

                <!-- Touch Rate Card -->
                <Border Grid.Column="1"
                        Background="{StaticResource SurfaceColor}"
                        CornerRadius="10"
                        Padding="20"
                        Margin="5,0,5,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ‘† Touch Rate"
                                   FontSize="16"
                                   Foreground="{StaticResource TextSecondaryColor}"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding TouchRateText}"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource SecondaryColor}"/>
                    </StackPanel>
                </Border>

                <!-- FPS Card -->
                <Border Grid.Column="2"
                        Background="{StaticResource SurfaceColor}"
                        CornerRadius="10"
                        Padding="20"
                        Margin="10,0,0,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ–¥ï¸ Screen FPS"
                                   FontSize="16"
                                   Foreground="{StaticResource TextSecondaryColor}"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding FpsText}"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource SuccessColor}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- Footer -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0">
            <TextBlock Text="Waiting for iPad connection on port 9876"
                       FontSize="12"
                       Foreground="{StaticResource TextSecondaryColor}"/>
        </StackPanel>
    </Grid>
</Window>
